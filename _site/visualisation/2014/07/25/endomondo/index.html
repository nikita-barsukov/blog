<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Maps of running routes in European cities. &mdash; A blog of Nikita Barsukov</title>
        <meta name="author" content="Nikita Barsukov">
        <meta name="description" content="Gallery of my data analysis projects, and other things that I'm interested in">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='/css/font-awesome.min.css' rel='stylesheet' type='text/css'>        
        <link href="http://fast.fonts.net/cssapi/b7310ad5-5ffb-4ab3-8ec5-7fc0a70e6421.css" type="text/css" rel="stylesheet" />
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" >
        <link href="//code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="stylesheet" />
        <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css" rel="stylesheet" >        
        <link href='/css/main.css' rel='stylesheet' type='text/css'> 
        <link href='/css/visual.css' rel='stylesheet' type='text/css'> 
        <link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup{background:#fff; clear:left; font:14px }
            #subscribe-header {
                padding: 10px;
                display: inline-block;
                cursor: pointer;
                background-color: #fff;
                border: 2px solid #bbb;
            }

            #subscribe-header:hover {
                background-color: #ddd;
            }
            #mc_embed_signup form{
              display: none;
            }
        </style>        

  
                

        
    </head>
    <body>
      <div id="main" class='container'>
        <div class="row">
          <div id='about-block' class="col-sm-2"> <div class='sidebar-nav'>
    <nav class="navbar navbar-default" id="about_block">
        <div class="navbar-header">
            <button data-target=".sidebar-navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <span class="visible-xs navbar-brand">Site menu</span>
        </div>
        <div class="navbar-collapse collapse sidebar-navbar-collapse">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="/"><i id="logo" class="icon-5x">Ð‘</i></a></li>
                <li><a href="https://github.com/nikita-barsukov/"><i class="icon-github icon-4x"></i></a></li>
                <li><a href="mailto:nikita@barsukov.net"><i class="icon-4x">@</i></a></li>
            </ul>
        </div>
    </nav>
</div>
</div>
          <div id='text' class="col-sm-7">
            <div class="page-header">
  <p class='page-title'>Maps of running routes in European cities.</p>
  <p class='info'>25 July 2014 | Tags: <a href="/tag/endomondo/" rel="tag">endomondo</a>, <a href="/tag/running/" rel="tag">running</a>, <a href="/tag/copenhagen/" rel="tag">copenhagen</a>, <a href="/tag/fitness/" rel="tag">fitness</a>, <a href="/tag/map/" rel="tag">map</a>   </p>
</div>
         <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
   <script src="//malsup.github.com/jquery.cycle2.js"></script>
    <style type="text/css">
      #pager{
        font-size: 20pt;
        cursor: pointer;
      }
      #pager span:hover{
        color: gray;
      }
      .cycle-pager-active{
        color: red!important;
      }
      .cycle-next, .cycle-prev {
        margin-top: 10px;
        display: inline-block;
        cursor: pointer;
      }
    </style>   
   <p>Endomondo is a fitness tracking mobile app. By default user tracks are public and available online. I parsed first 170k public workouts, extracted GPS data out of them and put routes on city maps.</p>

    <p>Despite the fact that raw log of these workouts was around 20 Gb in size, this is only around 1% of all the workouts available.</p>

    <p>This is map of running and walking workouts in selected European cities.</p>
    <div id="city-maps"  class="cycle-slideshow" data-cycle-loader="true" data-cycle-fx="scrollHorz" data-cycle-pager="#pager" data-cycle-timeout="0" data-cycle-slides="div.city-map">
      <div class="cycle-prev">&larr;</div>
      <div class="cycle-next">&rarr;</div>

      <div class="city-map">
        <h3>Copenhagen</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/copenhagen.png" alt="Endomondo workouts in Copenhagen"/>        
      </div>

      <div class="city-map">
        <h3>Stockholm</h3>
        <p><img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/stockholm.png" alt="Endomondo workouts in Stockholm"/></p>       
      </div>

      <div class="city-map">
        <h3>Oslo</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/oslo.png" alt="Endomondo workouts in Oslo"/>      
      </div>

      <div class="city-map">
        <h3>Helsinki</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/helsinki.png" alt="Endomondo workouts in Helsinki"/>       
      </div>

      <div class="city-map">
        <h3>Barcelona</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/barcelona.png" alt="Endomondo workouts in Barcelona"/> 
      </div>

      <div class="city-map">
        <h3>Warsaw</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/warsaw.png" alt="Endomondo workouts in Warsaw"/>       
      </div>

      <div class="city-map">
        <h3>Berlin</h3>
        <img class="map" src="https://s3-eu-west-1.amazonaws.com/barsukov-assets/images/berlin.png" alt="Endomondo workouts in Berlin"/>      
      </div>

    </div>
    <div id="pager" class="cycle-pager"></div>

    <p>I used a script in Ruby to download HTML pages of endomondo workouts, extract necessary information and write it to a delimited file. Then I used <a href="http://www.r-project.org">R</a> to clean up log files, extract GPS coordinates and put them on map. R libraries I used: <a href="http://ggplot2.org">ggplot</a> and <a href="http://cran.r-project.org/web/packages/ggmap/index.html">ggmap</a> for plotting, RJSONIO for parsing JSON data. Map tiles are from <a href="http://maps.stamen.com/watercolor/#11/55.6757/12.5676">Stamen</a>. Code behind this project is in a <a href="http://barsukov.net/programming/2014/07/26/endomondo-code.html">separate post</a>.</p>


            
<div id="mc_embed_signup">
        <h4 id='subscribe-header'>Subscribe to blog updates</h4>

<form action="//barsukov.us10.list-manage.com/subscribe/post?u=3a4ce1b8d74888faf6a7e25e8&amp;id=750580a2c7" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
        <p>If you leave your address, you will get a postcard from me.</p>
<div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
<div class="mc-field-group">
    <label for="mce-EMAIL">Email  <span class="asterisk">*</span>
</label>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
</div>
<div class="mc-field-group">
    <label for="mce-LNAME">Name </label>
    <input type="text" value="" name="LNAME" class="" id="mce-LNAME">
</div>
<div class="mc-field-group">
    <label for="mce-MMERGE1">Address </label>
    <textarea class="form-control" rows='3' value="" name="MMERGE1" class="" id="mce-MMERGE1"></textarea>
</div>
    <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_3a4ce1b8d74888faf6a7e25e8_750580a2c7" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->
          </div>   
        </div>
      </div>
      <div id="tooltip"></div>
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-43677904-2', 'barsukov.net');
    ga('send', 'pageview');
  </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
      <script type="text/javascript">
        $("#subscribe-header").click(function() {
            $( "#mc-embedded-subscribe-form" ).slideToggle('fast', function() {
              var n = $(document).height();
              $('html, body').animate({ scrollTop: n }, 50);
            });
        });
      </script>
    </body>
</html>
